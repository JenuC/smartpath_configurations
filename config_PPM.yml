# ========== PPM MICROSCOPE CONFIGURATION ==========
# Hardware and physical configuration only
# Imaging conditions (exposure, gain, white balance) are in imageprocessing_PPM.yml
# Autofocus settings are in autofocus_PPM.yml

ppm_optics : 1 # change to "NA" if you want BF
ppm_pizstage_offset : -1804

microscope:
  name: 'PPM'
  type: 'UprightBrightfield'
  detector_in_use: null
  objective_in_use: null
  modality: null

test-push:
  MSN: 'PPM_001'

# ========== MODALITY-SPECIFIC SETTINGS ==========
modalities:
  ppm:
    type: 'polarized'
    rotation_stage:
      device: 'LOCI_STAGE_PI_001'
      type: 'polarizer'
    rotation_angles:
      - name: 'negative'
        tick: -7  # 1 tick = 1 degrees
      - name: 'crossed'
        tick: 0   # 1 tick = 1 degrees
      - name: 'positive'
        tick: 7   # 1 tick = 1 degrees
      - name: 'uncrossed'
        tick: 90  # 1 tick = 1 degrees

  brightfield:
    type: 'brightfield'

# ========== ACQUISITION PROFILES ==========
# NOTE: Autofocus settings are in autofocus_PPM.yml
# NOTE: Imaging conditions (exposure, gain, white balance) are in imageprocessing_PPM.yml
acq_profiles:
  defaults:
    # Default settings by objective that apply unless overridden in specific profile
    - objective: 'LOCI_OBJECTIVE_OLYMPUS_10X_001'
      settings:
        pixel_size_xy_um:
          LOCI_DETECTOR_TELEDYNE_001: 0.4537  # MicroPublisher 6
          LOCI_DETECTOR_JAI_001: 0.347      # JAI prism detector

    - objective: 'LOCI_OBJECTIVE_OLYMPUS_20X_POL_001'
      settings:
        autofocus:
          n_steps: 30
          search_range_um: 15
          n_tiles: 5
        pixel_size_xy_um:
          LOCI_DETECTOR_TELEDYNE_001: 0.2271
          LOCI_DETECTOR_JAI_001: 0.1725

    - objective: 'LOCI_OBJECTIVE_OLYMPUS_40X_POL_001'
      settings:
        pixel_size_xy_um:
          LOCI_DETECTOR_TELEDYNE_001: 0.1142
          LOCI_DETECTOR_JAI_001: 0.0871

  profiles:
    # ===== PPM PROFILES =====
    - modality: 'ppm'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_10X_001'
      detector: 'LOCI_DETECTOR_TELEDYNE_001'

    - modality: 'ppm'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_10X_001'
      detector: 'LOCI_DETECTOR_JAI_001'

    - modality: 'ppm'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_20X_POL_001'
      detector: 'LOCI_DETECTOR_TELEDYNE_001'

    - modality: 'ppm'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_20X_POL_001'
      detector: 'LOCI_DETECTOR_JAI_001'

    - modality: 'ppm'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_40X_POL_001'
      detector: 'LOCI_DETECTOR_TELEDYNE_001'

    - modality: 'ppm'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_40X_POL_001'
      detector: 'LOCI_DETECTOR_JAI_001'

    # ===== BRIGHTFIELD PROFILES =====
    - modality: 'brightfield'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_10X_001'
      detector: 'LOCI_DETECTOR_TELEDYNE_001'

    - modality: 'brightfield'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_10X_001'
      detector: 'LOCI_DETECTOR_JAI_001'

    - modality: 'brightfield'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_20X_POL_001'
      detector: 'LOCI_DETECTOR_TELEDYNE_001'

    - modality: 'brightfield'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_20X_POL_001'
      detector: 'LOCI_DETECTOR_JAI_001'

    - modality: 'brightfield'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_40X_POL_001'
      detector: 'LOCI_DETECTOR_TELEDYNE_001'

    - modality: 'brightfield'
      objective: 'LOCI_OBJECTIVE_OLYMPUS_40X_POL_001'
      detector: 'LOCI_DETECTOR_JAI_001'

# ========== STAGE CONFIGURATION ==========
stage:
  stage_id: 'LOCI_STAGE_PRIOR_001'  # Prior XYZ stage
  limits:
    x_um:
      low: -17000
      high: 33000
    y_um:
      low: -12000
      high: 13000
    z_um:
      low: -5601 #stage raised with sample close to objective, this is the important one to NOT DAMAGE OBJECTIVE. SET CAREFULLY WITH HIGHEST POWER OBJECTIVE.
      high: -1600 #stage lowered far from objective

# ========== GENERAL SETTINGS ==========
slide_size_um:
  x: 40000
  y: 20000
